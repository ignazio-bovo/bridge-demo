"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatId = exports.shortHash = exports.formatHead = exports.getItemsCount = exports.timeInterval = exports.getOrGenerateSquidId = void 0;
function getOrGenerateSquidId() {
    return process.env.SQUID_ID || `gen-${randomString(10)}`;
}
exports.getOrGenerateSquidId = getOrGenerateSquidId;
function randomString(len) {
    let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let result = '';
    for (let i = 0; i < len; i++) {
        result += chars[Math.floor(Math.random() * chars.length)];
    }
    return result;
}
function timeInterval(seconds) {
    if (seconds < 60) {
        return Math.round(seconds) + 's';
    }
    let minutes = Math.ceil(seconds / 60);
    if (minutes < 60) {
        return minutes + 'm';
    }
    let hours = Math.floor(minutes / 60);
    minutes = minutes - hours * 60;
    return hours + 'h ' + minutes + 'm';
}
exports.timeInterval = timeInterval;
function getItemsCount(blocks) {
    let count = 0;
    for (let block of blocks) {
        for (let key in block) {
            let val = block[key];
            if (Array.isArray(val)) {
                count += val.length;
            }
        }
    }
    return count;
}
exports.getItemsCount = getItemsCount;
function formatHead(head) {
    return `${head.height}#${shortHash(head.hash)}`;
}
exports.formatHead = formatHead;
function shortHash(hash) {
    if (hash.startsWith('0x')) {
        return hash.slice(2, 7);
    }
    else {
        return hash.slice(0, 5);
    }
}
exports.shortHash = shortHash;
function formatId(block, ...address) {
    let no = block.height.toString().padStart(10, '0');
    let hash = shortHash(block.hash);
    let id = `${no}-${hash}`;
    for (let index of address) {
        id += '-' + index.toString().padStart(6, '0');
    }
    return id;
}
exports.formatId = formatId;
//# sourceMappingURL=util.js.map